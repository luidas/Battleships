'use strict';

const uuid = require('uuid');
const interfaces = require('os').networkInterfaces();

/**
 * To get a function which create uuid1 use MAC address.
 */
function getUuid1(node) {
    function getNode() {
        /* eslint-disable no-restricted-syntax */
        /* eslint-disable guard-for-in */
        for (const i in interfaces) {
            for (const j of interfaces[i]) {
                if (j.mac !== '00:00:00:00:00:00') {
                    return Buffer.from(j.mac.replace(/:/g, ''), 'hex');
                }
            }
        }
        return Buffer.from(uuid.v1().slice(24), 'hex');
    }
    const myNode = node || getNode();
    return () => uuid.v1({
        node: myNode,
    });
}

const uuid1 = getUuid1();

module.exports = Object.assign(uuid1, {
    uuid1,
    getUuid1,
});
